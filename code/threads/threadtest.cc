#include "kernel.h"
#include "main.h"
#include "thread.h"

void
SimpleThread(char* name)
{
    // char* u="wwww";
    // kernel->fileSystem->Create(u,10000);
    // OpenFile *of=kernel->fileSystem->Open((char *)u);
    // char *input="Hello! Hello! Hello! Hello! ";
    // for (int i = 0; i < 1000; ++i)
    // {
    //   of->WriteAt(input, 10, i*10);
    // }

    // char* temp = new char[1000];
    // of->ReadAt(temp, 100, 0);

    // printf("%s\n", temp);

     char* input = "ttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttvtttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttvttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttvttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttt";


    // if(addrSpace == NULL) cout<<"xxxxx"<<endl;
    //addrSpace->WriteAt(input, 10, 0);

    //cout<<"***"<<endl;

    // kernel->fileSystem->Create(t,0);
    // OpenFile *of1=kernel->fileSystem->Open((char *)u);
    // kernel->fileSystem->Create(t,0);
    // OpenFile *of2=kernel->fileSystem->Open((char *)u);
    // kernel->fileSystem->Create(t,0);
    // OpenFile *of3=kernel->fileSystem->Open((char *)u);
    // kernel->fileSystem->Create(t,0);
    // OpenFile *of4=kernel->fileSystem->Open((char *)u);
    // kernel->fileSystem->Create(t,0);
    // OpenFile *of5=kernel->fileSystem->Open((char *)u);
    // kernel->fileSystem->Create(t,0);
    // OpenFile *of6=kernel->fileSystem->Open((char *)u);
    // kernel->fileSystem->Create(t,0);
    // OpenFile *of7=kernel->fileSystem->Open((char *)u);
    // kernel->fileSystem->Create(t,0);
    // OpenFile *of8=kernel->fileSystem->Open((char *)u);
    // kernel->fileSystem->Create(t,0);
    // OpenFile *of9=kernel->fileSystem->Open((char *)u);
    // kernel->fileSystem->Create(t,0);
    // OpenFile *of10=kernel->fileSystem->Open((char *)u);
    // kernel->fileSystem->Create(t,0);
    // OpenFile *of11=kernel->fileSystem->Open((char *)u);
    
    // of1->WriteAt(input, 1000, 0);
    // of2->WriteAt(input, 1000, 0);
    // of3->WriteAt(input, 1000, 0);
    // of4->WriteAt(input, 1000, 0);
    // of5->WriteAt(input, 1000, 0);
    // of6->WriteAt(input, 1000, 0);
    // of7->WriteAt(input, 1000, 0);
    // of8->WriteAt(input, 1000, 0);
    // of9->WriteAt(input, 1000, 0);
    // of10->WriteAt(input, 1000, 0);
    // of11->WriteAt(input, 1000, 0);
    

    // char* temp = new char[40000];
    // of1->ReadAt(temp, 30000, 0);

    char* t="wwww";
    char* u="wwww";
    kernel->fileSystem->Create(t,100000);
    OpenFile *of=kernel->fileSystem->Open((char *)u);
    //cout<<"hhhhh"<<endl;
    of->WriteAt(input, 34000, 0);

    char* temp = new char[40000];
    of->ReadAt(temp, 30000, 0);

    printf("%s\n", temp);

    //kernel->fileSystem->Print();

}

void
ThreadTest()
{
    char* spaceName = "addressSpaceFile";

    Thread *t = new Thread("forked thread");
    t->Fork((VoidFunctionPtr) SimpleThread, (void *) spaceName);
    //kernel->currentThread->Yield();
}
